{
  "info": {
    "_postman_id": "c9a9e2fa-47e1-49f0-9680-541d327e238a",
    "name": "Geometry-Editor / Geometry-API",
    "description": "Testing collection for Geometry-editor and Geometry-api services (health checks)",
    "schema": "https://schema.getpostman.com/json/collection/v2.0.0/collection.json"
  },
  "item": [
    {
      "name": "Geometry-API",
      "item": [
        {
          "name": "Server Health",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "fd554bb5-f653-4841-8f48-de533cc6eb1d",
                "exec": [
                  "pm.test('Status', () => {\r",
                  "    pm.response.to.be.success;\r",
                  "    pm.response.to.be.withBody;\r",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "id": "fcf7ad78-545c-459e-b6a5-680293163729",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "url": "{{URL_api}}/health"
          },
          "response": []
        },
        {
          "name": "Token Creation",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "73a2bf08-5dfb-4151-b161-b8e2f171d413",
                "exec": [
                  "pm.test('Status', () => {\r",
                  "    pm.response.to.be.success;\r",
                  "    pm.response.to.be.withBody;\r",
                  "    pm.response.to.be.json;\r",
                  "});\r",
                  "\r",
                  "const responseJSON = pm.response.json();\r",
                  "\r",
                  "pm.test('Response', () => {\r",
                  "    pm.expect(responseJSON.access_token).to.be.a('string');\r",
                  "    pm.expect(responseJSON.scope).to.be.a('string');\r",
                  "    pm.expect(responseJSON.expires_in).to.be.a('number');\r",
                  "    pm.expect(responseJSON.token_type).to.be.a('string');\r",
                  "});\r",
                  "\r",
                  "pm.collectionVariables.set(\"token\", responseJSON.access_token);"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "f632b88d-e332-4861-92c5-26cc6961976a",
                "exec": [
                  "const stagingEndpoints = {\r",
                  "    eu: 'https://staging.eu.mappedin.com',\r",
                  "    na: 'https://staging.mappedin.com',\r",
                  "};\r",
                  "\r",
                  "const region = pm.collectionVariables.get('region');\r",
                  "pm.collectionVariables.set('token_url', stagingEndpoints[region]);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "id": "cce55ed5-a65d-4943-a38a-8f198a14657b",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"client_id\": \"{{client_id}}\",\r\n    \"client_secret\": \"{{client_secret}}\",\r\n    \"audience\": \"{{token_url}}\"\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": "{{URL_api}}/1/token"
          },
          "response": []
        },
        {
          "name": "Server Organization",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "ebcb8f07-b389-4f12-9537-f86671288441",
                "exec": [
                  "pm.test('Status', () => {\r",
                  "    pm.response.to.be.success;\r",
                  "    pm.response.to.be.withBody;\r",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "id": "8bac9816-5a64-4179-8c7f-5cd0678b0fd7",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "url": "{{URL_api}}/organization"
          },
          "response": []
        }
      ],
      "id": "11de8f34-11e8-4d65-8f73-128b96b867ef"
    },
    {
      "name": "Geometry-Editor",
      "item": [
        {
          "name": "Server Health",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "3ef7bb55-974f-48da-a611-4e75cc010ed3",
                "exec": [
                  "pm.test('Status', () => {\r",
                  "    pm.response.to.be.success;\r",
                  "    pm.response.to.be.withBody;\r",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "id": "8b3c6729-a0a1-430b-af1c-99519228c4b0",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "url": "{{URL_editor}}/health"
          },
          "response": []
        },
        {
          "name": "Environment",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "e4ac2933-8aa0-49e8-a2ea-6bd00726f218",
                "exec": [
                  "pm.test('Status', () => {\r",
                  "    pm.response.to.be.success;\r",
                  "    pm.response.to.be.withBody;\r",
                  "});\r",
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "id": "c32fc489-c593-4729-9255-003f225311f3",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "GET",
            "header": [],
            "url": "{{URL_editor}}/environment"
          },
          "response": []
        },
        {
          "name": "Static",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "b7ac2178-f747-44b5-9d82-4269cb2d35e5",
                "exec": [
                  "pm.test('Status', () => {\r",
                  "    pm.response.to.be.success;\r",
                  "    pm.response.to.be.withBody;\r",
                  "});\r",
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "id": "f0113ea2-a3de-4ead-9b85-3059f0e338cf",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "GET",
            "header": [],
            "url": "{{URL_editor}}/static"
          },
          "response": []
        },
        {
          "name": "Venue",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "d478e6d0-ddcd-432d-b2f5-2e13d49c9464",
                "exec": [
                  "pm.test('Status', () => {\r",
                  "    pm.response.to.be.success;\r",
                  "    pm.response.to.be.withBody;\r",
                  "});\r",
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "id": "8ded6235-db52-41d5-9744-e0b953afd43f",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "GET",
            "header": [],
            "url": "{{URL_editor}}/venue"
          },
          "response": []
        }
      ],
      "id": "d31ceb91-14ba-4167-afb5-f6093f76bb14"
    }
  ],
  "auth": {
    "type": "bearer",
    "bearer": {
      "token": "{{token}}"
    }
  },
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "id": "fb7c2826-a98d-42ec-a017-908c1ba5a85a",
        "type": "text/javascript",
        "exec": [
          ""
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "id": "24a4e5a0-cfcc-42cc-afd2-484af747a610",
        "type": "text/javascript",
        "exec": [
          ""
        ]
      }
    }
  ],
  "variable": [
    {
      "id": "97e80be3-d6a6-4928-ade0-3b267ae6851d",
      "key": "URL_editor",
      "value": "https://localhost:8080"
    },
    {
      "id": "edf449b1-0eb5-47e4-a49a-61f404cdcf76",
      "key": "region",
      "value": "na"
    },
    {
      "id": "59290edb-2062-43cc-acff-1677e67b61cf",
      "key": "URL_api",
      "value": "https://localhost:8000"
    },
    {
      "id": "8ebf5c1e-3bb4-4a58-89e4-f4c2926c4a63",
      "key": "token",
      "value": "(generated at runtime)"
    },
    {
      "id": "385469a2-7eb5-4c09-b0bd-e0c91dd88a4e",
      "key": "client_id",
      "value": "(write in 'current' value)"
    },
    {
      "id": "904bf89d-76ab-46c6-92f3-1ad52da1e711",
      "key": "client_secret",
      "value": "(write in 'current' value)"
    },
    {
      "id": "313ad86b-242b-44b7-a047-8a711a9f9e1f",
      "key": "token_url",
      "value": ""
    }
  ]
}