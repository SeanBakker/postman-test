{
  "info": {
    "_postman_id": "c9a9e2fa-47e1-49f0-9680-541d327e238a",
    "name": "Geometry-Editor / Geometry-API",
    "description": "Testing collection for Geometry-editor and Geometry-api services (health checks)",
    "schema": "https://schema.getpostman.com/json/collection/v2.0.0/collection.json"
  },
  "item": [
    {
      "name": "Geometry-API",
      "item": [
        {
          "name": "Server Health",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "fd554bb5-f653-4841-8f48-de533cc6eb1d",
                "exec": [
                  "pm.test('Status', () => {\r",
                  "    pm.response.to.be.success;\r",
                  "    pm.response.to.be.withBody;\r",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "id": "fcf7ad78-545c-459e-b6a5-680293163729",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "url": "{{URL_api}}/health"
          },
          "response": []
        },
        {
          "name": "Token Creation",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "73a2bf08-5dfb-4151-b161-b8e2f171d413",
                "exec": [
                  "pm.test('Status', () => {\r",
                  "    pm.response.to.be.success;\r",
                  "    pm.response.to.be.withBody;\r",
                  "    pm.response.to.be.json;\r",
                  "});\r",
                  "\r",
                  "const responseJSON = pm.response.json();\r",
                  "\r",
                  "pm.test('Response', () => {\r",
                  "    pm.expect(responseJSON.access_token).to.be.a('string');\r",
                  "    pm.expect(responseJSON.scope).to.be.a('string');\r",
                  "    pm.expect(responseJSON.expires_in).to.be.a('number');\r",
                  "    pm.expect(responseJSON.token_type).to.be.a('string');\r",
                  "});\r",
                  "\r",
                  "pm.collectionVariables.set(\"token\", responseJSON.access_token);"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "f632b88d-e332-4861-92c5-26cc6961976a",
                "exec": [
                  "const stagingEndpoints = {\r",
                  "    eu: 'https://staging.eu.mappedin.com',\r",
                  "    na: 'https://staging.mappedin.com',\r",
                  "};\r",
                  "\r",
                  "const region = pm.collectionVariables.get('region');\r",
                  "pm.collectionVariables.set('token_url', stagingEndpoints[region]);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "id": "cce55ed5-a65d-4943-a38a-8f198a14657b",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"client_id\": \"{{client_id}}\",\r\n    \"client_secret\": \"{{client_secret}}\",\r\n    \"audience\": \"https://staging.eu.mappedin.com\"\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": "{{URL_api}}/1/token"
          },
          "response": []
        },
        {
          "name": "Server Organization",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "ebcb8f07-b389-4f12-9537-f86671288441",
                "exec": [
                  "pm.test('Status', () => {\r",
                  "    pm.response.to.be.success;\r",
                  "    pm.response.to.be.withBody;\r",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "id": "8bac9816-5a64-4179-8c7f-5cd0678b0fd7",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "url": "{{URL_api}}/organization"
          },
          "response": []
        }
      ],
      "id": "11de8f34-11e8-4d65-8f73-128b96b867ef"
    },
    {
      "name": "Geometry-Editor",
      "item": [
        {
          "name": "Server Health",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "3ef7bb55-974f-48da-a611-4e75cc010ed3",
                "exec": [
                  "pm.test('Status', () => {\r",
                  "    pm.response.to.be.success;\r",
                  "    pm.response.to.be.withBody;\r",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "id": "8b3c6729-a0a1-430b-af1c-99519228c4b0",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "url": "{{URL_editor}}/health"
          },
          "response": []
        },
        {
          "name": "Environment",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "e4ac2933-8aa0-49e8-a2ea-6bd00726f218",
                "exec": [
                  "pm.test('Status', () => {\r",
                  "    pm.response.to.be.success;\r",
                  "    pm.response.to.be.withBody;\r",
                  "});\r",
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "id": "c32fc489-c593-4729-9255-003f225311f3",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "GET",
            "header": [],
            "url": "{{URL_editor}}/environment"
          },
          "response": []
        },
        {
          "name": "Static",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "b7ac2178-f747-44b5-9d82-4269cb2d35e5",
                "exec": [
                  "pm.test('Status', () => {\r",
                  "    pm.response.to.be.success;\r",
                  "    pm.response.to.be.withBody;\r",
                  "});\r",
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "id": "f0113ea2-a3de-4ead-9b85-3059f0e338cf",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "GET",
            "header": [],
            "url": "{{URL_editor}}/static"
          },
          "response": []
        },
        {
          "name": "Venue",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "d478e6d0-ddcd-432d-b2f5-2e13d49c9464",
                "exec": [
                  "pm.test('Status', () => {\r",
                  "    pm.response.to.be.success;\r",
                  "    pm.response.to.be.withBody;\r",
                  "});\r",
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "id": "8ded6235-db52-41d5-9744-e0b953afd43f",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "GET",
            "header": [],
            "url": "{{URL_editor}}/venue"
          },
          "response": []
        },
        {
          "name": "API",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "fae0dab7-7b8e-4785-9de9-db54940442bb",
                "exec": [
                  "pm.test('Status', () => {\r",
                  "    pm.response.to.be.success;\r",
                  "    pm.response.to.be.withBody;\r",
                  "});\r",
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "id": "d49f43db-6166-4d55-a651-5124ac5755b0",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "GET",
            "header": [],
            "url": "{{URL_editor}}/api/me"
          },
          "response": []
        }
      ],
      "id": "d31ceb91-14ba-4167-afb5-f6093f76bb14"
    }
  ],
  "auth": {
    "type": "bearer",
    "bearer": {
      "token": "{{token}}"
    }
  },
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "id": "8ce22d01-25c9-47a8-b8af-80ca8fea5ff4",
        "type": "text/javascript",
        "exec": [
          ""
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "id": "fbce1b5a-ad2f-4f09-8d56-50e17f736733",
        "type": "text/javascript",
        "exec": [
          ""
        ]
      }
    }
  ],
  "variable": [
    {
      "id": "2145fcba-ca5f-48cc-b594-31d10ef9563a",
      "key": "URL_editor",
      "value": "https://localhost:8080"
    },
    {
      "id": "dcdf5600-e8a7-43ef-b94a-5df430de0f89",
      "key": "region",
      "value": "na"
    },
    {
      "id": "8f7925b6-0bff-49f2-a393-4acdcbe2f303",
      "key": "URL_api",
      "value": "https://localhost:8000"
    },
    {
      "id": "f0a18915-d34b-42de-ac78-ac35ab646ac8",
      "key": "token",
      "value": "(generated at runtime)"
    },
    {
      "id": "f731ed23-101f-4eaa-a2fd-c32c01cfde06",
      "key": "client_id",
      "value": "(write in 'current' value)"
    },
    {
      "id": "602da6a0-5d4d-4d7f-857d-ef4111f6b32b",
      "key": "client_secret",
      "value": "(write in 'current' value)"
    },
    {
      "id": "50b551b9-f707-4315-9420-1ac36075c883",
      "key": "token_url",
      "value": "https://staging.eu.mappedin.com"
    }
  ]
}